from app import bot
from app.models import Tag
from telegram import KeyboardButton, ReplyKeyboardMarkup
from config import Config


def organizers(sender):
    text = '''
–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä:
[–ê–º—É—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç–Ω–∞—è —Ñ–∏–ª–∞—Ä–º–æ–Ω–∏—è](http://amurphil.ru)

–ü–∞—Ä—Ç–Ω—ë—Ä:
[–†–µ–∑–∏–¥–µ–Ω—Ü–∏—è –î–µ–¥—É—à–∫–∏ –ú–æ—Ä–æ–∑–∞ –≤ –ë–ª–∞–≥–æ–≤–µ—â–µ–Ω—Å–∫–µ](https://www.instagram.com/domdedamoroza/?igshid=cklfrsza6feb)
    '''
    bot.send_message(chat_id=sender.tg_id,
                     text=text,
                     parse_mode='Markdown',
                     disable_web_page_preview=True)


def success_registration(user):
    return f'*–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, {user.first_name}!*\n –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ.'


def lets_register():
    text = '''
–ü—Ä–∏–≤–µ—Ç! –°–Ω–∞—á–∞–ª–∞ –Ω–∞–¥–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è. –ù–∞–∂–∏–º–∞–π –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ.
    '''
    return text


def photo_template(user):
    text = '''
–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ñ–æ—Ç–æ –≤ —Ä–∞–º–∫–µ - –Ω—É–∂–Ω–æ –ø—Ä–∏—Å–ª–∞—Ç—å —Å—é–¥–∞ –ª—é–±—É—é —Å–≤–æ—é –ª–∏—á–Ω—É—é —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –∏–ª–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é, –≥–¥–µ —Ç—ã —Å –∫–æ–ª–ª–µ–∫—Ç–∏–≤–æ–º –∏–ª–∏ —Å–µ–º—å—ë–π, –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å –µ—ë —Ö—ç—à—Ç—ç–≥–æ–º #—Ñ–æ—Ç–æ–∑–æ–Ω–∞

–ê –≤–æ—Ç, –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π, –≤–∏–¥–µ–æ–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: https://telegra.ph/Kak-poluchit-foto-v-ramke-07-23
'''
    response = bot.send_message(chat_id=user.tg_id,
                                text=text,
                                parse_mode='Markdown')
    save_message(response, 'income', user.tg_id)


def stickers(user):
    text = '''
–í–æ—Ç –≤–∞—à–∏ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–µ —Å—Ç–∏–∫–µ—Ä—ã.
https://t.me/addstickers/dvergede
    '''
    response = bot.send_message(chat_id=user.tg_id,
                                text=text,
                                parse_mode='Markdown')
    save_message(response, 'income', user.tg_id)


def congrat(user):
    text = '''
‚ùóÔ∏è –û—Å—Ç–∞–≤–ª—è–π –∑–¥–µ—Å—å —Å–≤–æ–∏ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –ø—Ä–∏–≤–µ—Ç—ã –ª—é–±–∏–º—ã–º –∫–æ–ª–ª–µ–≥–∞–º —Å #–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö —É—Å–ª—ã—à–∏—Ç–µ –≤ —ç—Ñ–∏—Ä–µ üôåüèª
    '''
    response = bot.send_message(chat_id=user.tg_id,
                                text=text,
                                parse_mode='Markdown')
    save_message(response, 'income', user.tg_id)


def program(user):
    text = '''
–î–∞–Ω–Ω—ã–π –±–ª–æ–∫ —Å–æ–∑–¥–∞–Ω, —á—Ç–æ–±—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –≤—Å–µ–≥–¥–∞ –º–æ–≥–ª–∏ –±—ã—Ç—å –≤ –∫—É—Ä—Å–µ —Å–æ–±—ã—Ç–∏–π –∏ –∑–Ω–∞—Ç—å –∫–æ–≥–¥–∞ –∏—Ö –±—É–¥—É—Ç –∂–¥–∞—Ç—å –Ω–æ–≤—ã–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∏ –∏–≥—Ä—ã. 

–ù–∞–ø—Ä–∏–º–µ—Ä:
–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫: 
 ‚ÅÉ 18.00-19.00 - –ò–≥—Ä–∞–µ–º –≤ –≤–∏–∑ –ø–æ —Å–µ—Ä–∏–∞–ª–∞–º;
 ‚ÅÉ 19.00-19.30 - –£—á–∏–º—Å—è –ø–∏—Ç—å –≤–∏–Ω–æ + –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—É–ª–∫–∞ –ø–æ –õ—É–≤—Ä—É.

–°—Ä–µ–¥–∞: 
 ‚ÅÉ 13.00-18.00 - –°–∫–∏–Ω—å —Å–∞–º—É—é —Å–º–µ—à–Ω—É—é —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –∑–∞ 2020 –≥–æ–¥;
 ‚ÅÉ 18,00-19.00 - –ù–æ–≤–æ–≥–æ–¥–Ω–µ–µ –ª–æ—Ç–æ.

–ü—è—Ç–Ω–∏—Ü–∞:
 ‚ÅÉ 18.00-18.30 - –ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å –ø–æ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—é –∫–æ–∫—Ç–µ–π–ª–µ–π; 
 ‚ÅÉ 18.30-18.40 - –° –∫–æ–∫—Ç–µ–π–ª—è–º–∏ —Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—É—é —Ä–µ—á—å –≥–ª–∞–≤—ã –∫–æ–º–ø–∞–Ω–∏–∏;
 ‚ÅÉ 18.40-19.30 - –ò–≥—Ä–∞–µ–º –≤ –∫–ª–µ–≤–µ—Ä;
 ‚ÅÉ 19.30-20.00 - –ù–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –ª—É—á—à–∏—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≥–æ–¥–∞;
 ‚ÅÉ 20.30-22.00 - –°—Ç–∞—Ä—Ç –æ–Ω–ª–∞–π–Ω-–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π + –¥–∏–¥–∂–µ–π-—Å–µ—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏.

–í–Ω–∏–º–∞–Ω–∏–µ!
–¢–∞–∫–∂–µ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç–∞—Ö –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:
 ‚ÅÉ –î–µ—Ç—Å–∫–∏–µ –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å—ã;
 ‚ÅÉ –ß–µ–º–ø–∏–æ–Ω–∞—Ç –ø–æ –º–∞—Ñ–∏–∏;
 ‚ÅÉ –£–≥–∞–¥–∞–π –º–µ–ª–æ–¥–∏—é;
 ‚ÅÉ Zoom-–∫—Ä–æ–∫–æ–¥–∏–ª.
'''
    response = bot.send_animation(chat_id=user.tg_id,
                                  caption=text,
                                  animation='https://media.giphy.com/media/26u4cqiYI30juCOGY/giphy.gif',
                                  parse_mode='Markdown')
    # save_message(response, 'income', user.tg_id)



def tg_user_mention(user):
    return f'[{user.first_name} {user.last_name}](tg://user?id={user.tg_id})'


def greeting(user):
    text = f'''
–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, {user.first_name}!
–≠—Ç–æ –±–æ—Ç –¥–ª—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á –†–æ—Å–Ω–∞–Ω–æ 
'''
    return text


def main_menu():
    return '''
–í–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞ –∏–∫–æ–Ω–∫–∞ –≤ –≤–∏–¥–µ –∫–≤–∞–¥—Ä–∞—Ç–∏–∫–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º 4 –ª–µ–ø–µ—Å—Ç–∫–∞.
–ù–∞–∂–∏–º–∞–π –Ω–∞ –Ω–µ—ë –∏ —Ç—ã —É–≤–∏–¥–∏—à—å –∫–Ω–æ–ø–∫–∏ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é.
–ï—Å–ª–∏ —Ç–∞–∫–æ–π –∫–Ω–æ–ø–∫–∏ –Ω–µ—Ç - –ø—Ä–∏—à–ª–∏—Ç–µ –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É /start <- –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ —ç—Ç—É
–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π –∑–¥–µ—Å—å: https://telegra.ph/ikonka-09-15
    '''


def refer_link(user):
    text = '''
*–ö–û–ù–ö–£–†–° "–ü–û–î–ö–õ–Æ–ß–ò –ö–û–õ–õ–ï–ì–£"*

–ò—Ç–∞–∫, —Å–º–æ—Ç—Ä–∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ, –≤—Å–µ–≥–æ 2 —É—Å–ª–æ–≤–∏—è –∫–æ–Ω–∫—É—Ä—Å–∞:üëá

‚úÖ –¢–µ–±–µ –Ω—É–∂–Ω–æ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω–æ –≤–æ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è—Ö –∏ –≤ –∫–æ–Ω–∫—É—Ä—Å–∞—Ö –≤ —á–∞—Ç-–±–æ—Ç–µ;

‚úÖ–¢–µ–±–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ –∫–æ–ª–ª–µ–≥.

–ö–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å:
1. –ü–æ–¥ —ç—Ç–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º —Ç–≤–æ—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –°–°–´–õ–ö–ê.
2. –°–∫–æ–ø–∏—Ä—É–π –µ—ë.
3. –ò–º–µ–Ω–Ω–æ –≠–¢–£ —Å—Å—ã–ª–∫—É —Ç–µ–±–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –∫–æ–ª–ª–µ–≥–∞–º,  –∫–æ—Ç–æ—Ä—ã–µ –µ—â–µ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã.

–°—Å—ã–ª–∫—É –Ω–∞–ø—Ä–∞–≤–ª—è–π –ª—é–±—ã–º —É–¥–æ–±–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º (—ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞, WhatsApp, Telegram –∏ –¥.—Ä.).
‚ÄºÔ∏è–ì–ª–∞–≤–Ω–æ–µ, —Ç–µ–±–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ–±—ã –∫–æ–ª–ª–µ–≥–∏ –ø–æ —Ç–≤–æ–µ–π —Å—Å—ã–ª–∫–µ  –ø—Ä–æ—à–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –ø–æ–¥–∫–ª—é—á–∏–ª–∏—Å—å.

–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –≤—Å–µ—Ö —ç—Ç–∏—Ö –ø—É–Ω–∫—Ç–æ–≤ - —Ç–≤–æ–π —Ü–µ–Ω–Ω—ã–π –±–∞–ª–ª –±—É–¥–µ—Ç –∑–∞—á—Ç–µ–Ω –≤ —Ç–≤–æ—é –∫–æ–ø–∏–ª–∫—É!
–ü–æ–º–Ω–∏, —á–µ–º –±–æ–ª—å—à–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π, —Ç–µ–º –≤—ã—à–µ —Ç–≤–æ—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.
'''
    response = bot.send_message(chat_id=user.tg_id,
                                text=text,
                                parse_mode='Markdown')
    save_message(response, 'income', user.tg_id)
    link = f'https://t.me/{Config.BOT_NAME}?start=refer_{user.id}'
    response = bot.send_message(chat_id=user.tg_id,
                                text=link)
    save_message(response, 'income', user.tg_id)


def invited_user_came(user):
    return f'''
–ü–æ —Ç–≤–æ–µ–º—É –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—é –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user.first_name}
'''


def already_registered():
    return '''
–ü—Ä–∏–≤–µ—Ç, –≤—ã —É–∂–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å
'''


def help(user):
    reply_markup = None
    if not user.phone:
        text = f'{user.first_name}, —Ç–≤–æ–π –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–∏–Ω—è—Ç.\n' \
               f'–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞.\n' \
               f'–° –≤–∞–º–∏ —Å–≤—è–∂—É—Ç—Å—è –ø—Ä–∏ –±–ª–∏–∂–∞–π—à–µ–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.'
        phone_button = KeyboardButton(text='‚òéÔ∏è –ù–ê–ñ–ú–ò–¢–ï –°–Æ–î–ê, –ß–¢–û–ë–´ –ü–û–î–ï–õ–ò–¢–¨–°–Ø –ù–û–ú–ï–†–û–ú –¢–ï–õ–ï–§–û–ù–ê', request_contact=True)
        reply_markup = ReplyKeyboardMarkup(keyboard=[[phone_button]], one_time_keyboard=True, selective=True)
    else:
        text = f'{user.first_name}, —Ç–≤–æ–π –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–∏–Ω—è—Ç.\n' \
               f'–° —Ç–æ–±–æ–π —Å–≤—è–∂—É—Ç—Å—è –ø—Ä–∏ –±–ª–∏–∂–∞–π—à–µ–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.'
    ai_tag = Tag.query.filter(Tag.name.ilike('AI')).first()
    # if ai_tag in user.tags:
    #     user.tags.remove(ai_tag)
    #     db.session.commit()
    for moderator in user.get_group().moderators:
        response = bot.send_message(chat_id=moderator.tg_id,
                                    text=f'üÜò{tg_user_mention(user)} –ø—Ä–æ—Å–∏—Ç –ø–æ–º–æ—â–∏\n'
                                         f'id: {user.id}\n'
                                         f'–§–ò: {user.first_name} {user.last_name}',
                                    parse_mode='Markdown')
        save_message(tg_message=response, direction='income', user_tg_id=moderator.tg_id)
    response = bot.send_message(chat_id=user.tg_id, text=text, reply_markup=reply_markup)
    save_message(tg_message=response, direction='income', user_tg_id=user.tg_id)
    response = bot.send_message(chat_id=user.tg_id,
                     text='–ö—Å—Ç–∞—Ç–∏, –≤–æ—Ç  '
                          '[–∫–æ—Ä–æ—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è](https://telegra.ph/Instrukciya-igry-Snezhnoe-loto-11-16)',
                     parse_mode='Markdown')
    save_message(tg_message=response, direction='income', user_tg_id=user.tg_id)



